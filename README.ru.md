# html-truncate-ts

> **–Ø–∑—ã–∫–∏:** [üá∫üá∏ English](./README.md) | **üá∑üá∫ –†—É—Å—Å–∫–∏–π**

[![TypeScript](https://img.shields.io/badge/TypeScript-007ACC?style=for-the-badge&logo=typescript&logoColor=white)](https://www.typescriptlang.org/)
[![Node.js](https://img.shields.io/badge/Node.js-43853D?style=for-the-badge&logo=node.js&logoColor=white)](https://nodejs.org/)
[![Jest](https://img.shields.io/badge/Jest-323330?style=for-the-badge&logo=Jest&logoColor=white)](https://jestjs.io/)
[![ESLint](https://img.shields.io/badge/ESLint-4B3263?style=for-the-badge&logo=eslint&logoColor=white)](https://eslint.org/)
[![Prettier](https://img.shields.io/badge/Prettier-F7B93E?style=for-the-badge&logo=prettier&logoColor=white)](https://prettier.io/)

---

TypeScript –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –æ–±—Ä–µ–∑–∫–∏ HTML —Å—Ç—Ä–æ–∫ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º HTML —Ç–µ–≥–æ–≤ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã.

## üöÄ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–µ–∑–∫–∞ HTML** - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç HTML —Ç–µ–≥–∏ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ TypeScript** - –ü–æ–ª–Ω—ã–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–æ–≤ –≤–∫–ª—é—á–µ–Ω—ã
- **Universal Module Definition (UMD)** - –†–∞–±–æ—Ç–∞–µ—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–∞—Ö, Node.js –∏ —Å–±–æ—Ä—â–∏–∫–∞—Ö
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤** - ES Modules, CommonJS, UMD –∏ AMD
- **–ì–∏–±–∫–∏–µ –æ–ø—Ü–∏–∏** - –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –º–Ω–æ–≥–æ—Ç–æ—á–∏–µ, –æ–±—Ä–µ–∑–∫–∞ —Å–ª–æ–≤ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ URL** - –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç URL –ø—Ä–∏ –æ–±—Ä–µ–∑–∫–µ
- **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã** - ESLint, Prettier, Jest –∏ git hooks

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
npm install html-truncate-ts
# –∏–ª–∏
yarn add html-truncate-ts
# –∏–ª–∏
pnpm add html-truncate-ts
```

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### ES Modules (–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π JavaScript/TypeScript)

```javascript
import { truncate } from 'html-truncate-ts';

const html =
  '<p>–≠—Ç–æ <strong>–æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è</strong> HTML —Å—Ç—Ä–æ–∫–∞, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ –æ–±—Ä–µ–∑–∞—Ç—å</p>';
const result = truncate(html, 50);
console.log(result); // '<p>–≠—Ç–æ <strong>–æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è</strong> HTML —Å—Ç—Ä–æ–∫–∞, –∫–æ—Ç–æ—Ä—É—é...</p>'
```

### CommonJS (Node.js)

```javascript
const { truncate } = require('html-truncate-ts');

const html =
  '<p>–≠—Ç–æ <strong>–æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è</strong> HTML —Å—Ç—Ä–æ–∫–∞, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ –æ–±—Ä–µ–∑–∞—Ç—å</p>';
const result = truncate(html, 50);
console.log(result); // '<p>–≠—Ç–æ <strong>–æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è</strong> HTML —Å—Ç—Ä–æ–∫–∞, –∫–æ—Ç–æ—Ä—É—é...</p>'
```

### UMD (–ë—Ä–∞—É–∑–µ—Ä)

#### –ß–µ—Ä–µ–∑ CDN

```html
<script src="https://unpkg.com/html-truncate-ts/dist/umd/html-truncate.min.js"></script>
<script>
  const html =
    '<p>–≠—Ç–æ <strong>–æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è</strong> HTML —Å—Ç—Ä–æ–∫–∞, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ –æ–±—Ä–µ–∑–∞—Ç—å</p>';
  const result = HtmlTruncate.truncate(html, 50);
  console.log(result); // '<p>–≠—Ç–æ <strong>–æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è</strong> HTML —Å—Ç—Ä–æ–∫–∞, –∫–æ—Ç–æ—Ä—É—é...</p>'
</script>
```

#### –õ–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª

```html
<script src="path/to/html-truncate.min.js"></script>
<script>
  const html =
    '<p>–≠—Ç–æ <strong>–æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è</strong> HTML —Å—Ç—Ä–æ–∫–∞, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ –æ–±—Ä–µ–∑–∞—Ç—å</p>';
  const result = HtmlTruncate.truncate(html, 50);
  console.log(result); // '<p>–≠—Ç–æ <strong>–æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è</strong> HTML —Å—Ç—Ä–æ–∫–∞, –∫–æ—Ç–æ—Ä—É—é...</p>'
</script>
```

### AMD (RequireJS)

```javascript
require(['html-truncate-ts'], function (htmlTruncate) {
  const html =
    '<p>–≠—Ç–æ <strong>–æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è</strong> HTML —Å—Ç—Ä–æ–∫–∞, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ –æ–±—Ä–µ–∑–∞—Ç—å</p>';
  const result = htmlTruncate.truncate(html, 50);
  console.log(result); // '<p>–≠—Ç–æ <strong>–æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è</strong> HTML —Å—Ç—Ä–æ–∫–∞, –∫–æ—Ç–æ—Ä—É—é...</p>'
});
```

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ TypeScript

```typescript
import { truncate, TruncateOptions } from 'html-truncate-ts';

const html =
  '<p>–≠—Ç–æ <strong>–æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è</strong> HTML —Å—Ç—Ä–æ–∫–∞, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ –æ–±—Ä–µ–∑–∞—Ç—å</p>';

const options: TruncateOptions = {
  ellipsis: '...',
  truncateLastWord: false,
  slop: 10,
  keepImageTag: false,
};

const result = truncate(html, 50, options);
console.log(result); // '<p>–≠—Ç–æ <strong>–æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è</strong> HTML —Å—Ç—Ä–æ–∫–∞, –∫–æ—Ç–æ—Ä—É—é...</p>'
```

## üì¶ –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–∏–π —Ñ–æ—Ä–º–∞—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–∞—à–µ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

- **ES Modules**: `dist/esm/index.js` (–¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–±–æ—Ä—â–∏–∫–æ–≤, Node.js —Å `"type": "module"`)
- **CommonJS**: `dist/cjs/index.cjs` (–¥–ª—è Node.js –±–µ–∑ `"type": "module"`)
- **Browser**: `dist/umd/html-truncate.min.js` (–¥–ª—è –ø—Ä—è–º–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ)

## üìä –†–∞–∑–º–µ—Ä—ã —Ñ–∞–π–ª–æ–≤

- **ESM**: ~2.6KB –Ω–µ—Å–∂–∞—Ç—ã–π
- **CJS**: ~2.9KB –Ω–µ—Å–∂–∞—Ç—ã–π
- **UMD**: ~6.3KB –Ω–µ—Å–∂–∞—Ç—ã–π, ~2.0KB –º–∏–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π

## üìö API

### `truncate(string, maxLength, options?)`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

- `string` (string): HTML —Å—Ç—Ä–æ–∫–∞ –¥–ª—è –æ–±—Ä–µ–∑–∫–∏
- `maxLength` (number): –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –æ–±—Ä–µ–∑–∞–Ω–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
- `options` (object, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–û–ø—Ü–∏–∏:**

- `keepImageTag` (boolean): –°–æ—Ö—Ä–∞–Ω—è—Ç—å –ª–∏ —Ç–µ–≥–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `false`)
- `truncateLastWord` (boolean): –û–±—Ä–µ–∑–∞—Ç—å –ª–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–ª–æ–≤–æ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `true`)
- `slop` (number): –î–æ–ø—É—Å–∫ –¥–ª—è –æ–±—Ä–µ–∑–∫–∏ —Å–ª–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `10`)
- `ellipsis` (boolean | string): –°–∏–º–≤–æ–ª –º–Ω–æ–≥–æ—Ç–æ—á–∏—è –∏–ª–∏ false –¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `"..."`)

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `string` - –û–±—Ä–µ–∑–∞–Ω–Ω–∞—è HTML —Å—Ç—Ä–æ–∫–∞

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pnpm install

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
pnpm test

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –≤ —Ä–µ–∂–∏–º–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è
pnpm test:watch

# –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
pnpm build

# –õ–∏–Ω—Ç–∏–Ω–≥ –∫–æ–¥–∞
pnpm lint

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
pnpm format

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
pnpm typecheck
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ —Ç–µ—Å—Ç—ã, –ø–æ–∫—Ä—ã–≤–∞—é—â–∏–µ:

- –ë–∞–∑–æ–≤—É—é –æ–±—Ä–µ–∑–∫—É —Ç–µ–∫—Å—Ç–∞
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ HTML —Ç–µ–≥–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫—É —Ç–µ–≥–æ–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ –º–Ω–æ–≥–æ—Ç–æ—á–∏–µ
- –û–±—Ä–µ–∑–∫—É —Å —É—á–µ—Ç–æ–º —Å–ª–æ–≤
- –°–ª–æ–∂–Ω—ã–µ HTML —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- –ì—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏ (–ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏, –∫–æ—Ä–æ—Ç–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç)

### –ë—ã—Å—Ç—Ä–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–æ–≤

```bash
# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ (—Å–Ω–∞—á–∞–ª–∞ —Å–±–æ—Ä–∫–∞, –∑–∞—Ç–µ–º —Ç–µ—Å—Ç—ã)
pnpm test:formats

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–æ–≤ —Å–±–æ—Ä–∫–∏
pnpm test:all
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤

#### Node.js CommonJS

```bash
node ./scripts/test-node.cjs
```

#### Browser UMD

–û—Ç–∫—Ä–æ–π—Ç–µ `test-browser.html` –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —á–µ—Ä–µ–∑ HTTP —Å–µ—Ä–≤–µ—Ä:

```bash
python3 -m http.server 8000
# –ó–∞—Ç–µ–º –æ—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8000/test-browser.html
```

#### ES Modules

```bash
node -e "import('./dist/esm/index.js').then(mod => console.log('ESM test:', mod.truncate('<p>Test</p>', 10)))"
```

#### –Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã

```bash
# –ó–∞–ø—É—Å–∫ Jest —é–Ω–∏—Ç —Ç–µ—Å—Ç–æ–≤
pnpm test

# –ó–∞–ø—É—Å–∫ Jest –≤ —Ä–µ–∂–∏–º–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è
pnpm test:watch
```

## üìã –°–∫—Ä–∏–ø—Ç—ã

- `build` - –ö–æ–º–ø–∏–ª—è—Ü–∏—è TypeScript –≤ JavaScript
- `clean` - –£–¥–∞–ª–µ–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ —Å–±–æ—Ä–∫–∏
- `dev` - –†–µ–∂–∏–º –Ω–∞–±–ª—é–¥–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- `format` - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ —Å Prettier
- `lint` - –õ–∏–Ω—Ç–∏–Ω–≥ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞ —Å ESLint
- `test` - –ó–∞–ø—É—Å–∫ Jest —Ç–µ—Å—Ç–æ–≤
- `typecheck` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ –±–µ–∑ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:

- **TypeScript** - –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ JavaScript
- **ESLint** - –õ–∏–Ω—Ç–∏–Ω–≥ –∫–æ–¥–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π TypeScript
- **Prettier** - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
- **Jest** - –§—Ä–µ–π–º–≤–æ—Ä–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **Git hooks** - –ü—Ä–µ-–∫–æ–º–º–∏—Ç –ª–∏–Ω—Ç–∏–Ω–≥ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø—Ä–µ-–ø—É—à —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ [nodejs-html-truncate](https://github.com/huang47/nodejs-html-truncate) –æ—Ç huang47, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª –∑–∞–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω 7 —Å–µ–Ω—Ç—è–±—Ä—è 2024 –≥–æ–¥–∞. –î–∞–Ω–Ω–∞—è TypeScript –≤–µ—Ä—Å–∏—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∞ –Ω–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏.
